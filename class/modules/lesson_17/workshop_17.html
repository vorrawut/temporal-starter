
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <title>Workshop Â· Temporal Workflow Bootcamp</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 6.0.3">
        <meta name="author" content="Temporal Workflow Bootcamp Team">
        
        
    
    <link rel="stylesheet" href="../../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/@honkit/honkit-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="diagram.html" />
    
    
    <link rel="prev" href="concept.html" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Introduction</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../../">
            
                <a href="../../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../Introduction.html">
            
                <a href="../../Introduction.html">
            
                    
                    Welcome to Temporal Workflows
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../temporal-architecture.html">
            
                <a href="../../temporal-architecture.html">
            
                    
                    Temporal Architecture Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../intro-diagram.html">
            
                <a href="../../intro-diagram.html">
            
                    
                    Visual Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Core Modules</li>
        
        
    

    
        
        <li class="header">Lesson 1: Introduction to Temporal</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../lesson_1/concept.html">
            
                <a href="../lesson_1/concept.html">
            
                    
                    Concept
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../lesson_1/workshop_1.html">
            
                <a href="../lesson_1/workshop_1.html">
            
                    
                    Workshop
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Lesson 2: Kotlin + Spring Boot + Temporal Setup</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../lesson_2/concept.html">
            
                <a href="../lesson_2/concept.html">
            
                    
                    Concept
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../lesson_2/workshop_2.html">
            
                <a href="../lesson_2/workshop_2.html">
            
                    
                    Workshop
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Lesson 3: Run Temporal Locally</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../lesson_3/concept.html">
            
                <a href="../lesson_3/concept.html">
            
                    
                    Concept
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="../lesson_3/workshop_3.html">
            
                <a href="../lesson_3/workshop_3.html">
            
                    
                    Workshop
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Lesson 4: HelloWorkflow</li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../lesson_4/concept.html">
            
                <a href="../lesson_4/concept.html">
            
                    
                    Concept
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="../lesson_4/workshop_4.html">
            
                <a href="../lesson_4/workshop_4.html">
            
                    
                    Workshop
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Lesson 5: Adding a Simple Activity</li>
        
        
    
        <li class="chapter " data-level="7.1" data-path="../lesson_5/concept.html">
            
                <a href="../lesson_5/concept.html">
            
                    
                    Concept
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="../lesson_5/workshop_5.html">
            
                <a href="../lesson_5/workshop_5.html">
            
                    
                    Workshop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="../lesson_5/diagram.html">
            
                <a href="../lesson_5/diagram.html">
            
                    
                    Diagram
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Lesson 6: Workflow & Activity Separation</li>
        
        
    
        <li class="chapter " data-level="8.1" data-path="../lesson_6/concept.html">
            
                <a href="../lesson_6/concept.html">
            
                    
                    Concept
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.2" data-path="../lesson_6/workshop_6.html">
            
                <a href="../lesson_6/workshop_6.html">
            
                    
                    Workshop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.3" data-path="../lesson_6/diagram.html">
            
                <a href="../lesson_6/diagram.html">
            
                    
                    Diagram
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.4" data-path="../lesson_6/parameter.html">
            
                <a href="../lesson_6/parameter.html">
            
                    
                    Parameters
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Lesson 7: Workflow Input/Output</li>
        
        
    
        <li class="chapter " data-level="9.1" data-path="../lesson_7/concept.html">
            
                <a href="../lesson_7/concept.html">
            
                    
                    Concept
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.2" data-path="../lesson_7/workshop_7.html">
            
                <a href="../lesson_7/workshop_7.html">
            
                    
                    Workshop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.3" data-path="../lesson_7/diagram.html">
            
                <a href="../lesson_7/diagram.html">
            
                    
                    Diagram
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Lesson 8: Activity Retry + Timeout</li>
        
        
    
        <li class="chapter " data-level="10.1" data-path="../lesson_8/concept.html">
            
                <a href="../lesson_8/concept.html">
            
                    
                    Concept
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="10.2" data-path="../lesson_8/workshop_8.html">
            
                <a href="../lesson_8/workshop_8.html">
            
                    
                    Workshop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="10.3" data-path="../lesson_8/diagram.html">
            
                <a href="../lesson_8/diagram.html">
            
                    
                    Diagram
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Lesson 9: Error Handling in Workflows</li>
        
        
    
        <li class="chapter " data-level="11.1" data-path="../lesson_9/concept.html">
            
                <a href="../lesson_9/concept.html">
            
                    
                    Concept
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="11.2" data-path="../lesson_9/workshop_9.html">
            
                <a href="../lesson_9/workshop_9.html">
            
                    
                    Workshop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="11.3" data-path="../lesson_9/diagram.html">
            
                <a href="../lesson_9/diagram.html">
            
                    
                    Diagram
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Lesson 10: Signals</li>
        
        
    
        <li class="chapter " data-level="12.1" data-path="../lesson_10/concept.html">
            
                <a href="../lesson_10/concept.html">
            
                    
                    Concept
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="12.2" data-path="../lesson_10/workshop_10.html">
            
                <a href="../lesson_10/workshop_10.html">
            
                    
                    Workshop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="12.3" data-path="../lesson_10/diagram.html">
            
                <a href="../lesson_10/diagram.html">
            
                    
                    Diagram
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Lesson 11: Queries</li>
        
        
    
        <li class="chapter " data-level="13.1" data-path="../lesson_11/concept.html">
            
                <a href="../lesson_11/concept.html">
            
                    
                    Concept
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="13.2" data-path="../lesson_11/workshop_11.html">
            
                <a href="../lesson_11/workshop_11.html">
            
                    
                    Workshop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="13.3" data-path="../lesson_11/diagram.html">
            
                <a href="../lesson_11/diagram.html">
            
                    
                    Diagram
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Lesson 12: Child Workflows & continueAsNew</li>
        
        
    
        <li class="chapter " data-level="14.1" data-path="../lesson_12/concept.html">
            
                <a href="../lesson_12/concept.html">
            
                    
                    Concept
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="14.2" data-path="../lesson_12/workshop_12.html">
            
                <a href="../lesson_12/workshop_12.html">
            
                    
                    Workshop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="14.3" data-path="../lesson_12/diagram.html">
            
                <a href="../lesson_12/diagram.html">
            
                    
                    Diagram
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Lesson 13: Versioning with Workflow.getVersion()</li>
        
        
    
        <li class="chapter " data-level="15.1" data-path="../lesson_13/concept.html">
            
                <a href="../lesson_13/concept.html">
            
                    
                    Concept
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="15.2" data-path="../lesson_13/workshop_13.html">
            
                <a href="../lesson_13/workshop_13.html">
            
                    
                    Workshop
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Lesson 14: Timers and Cron Workflows</li>
        
        
    
        <li class="chapter " data-level="16.1" data-path="../lesson_14/concept.html">
            
                <a href="../lesson_14/concept.html">
            
                    
                    Concept
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="16.2" data-path="../lesson_14/workshop_14.html">
            
                <a href="../lesson_14/workshop_14.html">
            
                    
                    Workshop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="16.3" data-path="../lesson_14/diagram.html">
            
                <a href="../lesson_14/diagram.html">
            
                    
                    Diagram
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Lesson 15: External Service Integration</li>
        
        
    
        <li class="chapter " data-level="17.1" data-path="../lesson_15/concept.html">
            
                <a href="../lesson_15/concept.html">
            
                    
                    Concept
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="17.2" data-path="../lesson_15/workshop_15.html">
            
                <a href="../lesson_15/workshop_15.html">
            
                    
                    Workshop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="17.3" data-path="../lesson_15/diagram.html">
            
                <a href="../lesson_15/diagram.html">
            
                    
                    Diagram
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Lesson 16: Testing + Production Readiness</li>
        
        
    
        <li class="chapter " data-level="18.1" data-path="../lesson_16/concept.html">
            
                <a href="../lesson_16/concept.html">
            
                    
                    Concept
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="18.2" data-path="../lesson_16/workshop_16.html">
            
                <a href="../lesson_16/workshop_16.html">
            
                    
                    Workshop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="18.3" data-path="../lesson_16/diagram.html">
            
                <a href="../lesson_16/diagram.html">
            
                    
                    Diagram
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Lesson 17: Deployment</li>
        
        
    
        <li class="chapter " data-level="19.1" data-path="concept.html">
            
                <a href="concept.html">
            
                    
                    Concept
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="19.2" data-path="workshop_17.html">
            
                <a href="workshop_17.html">
            
                    
                    Workshop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="19.3" data-path="diagram.html">
            
                <a href="diagram.html">
            
                    
                    Diagram
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Workshop Guides</li>
        
        
    

    
        
        <li class="header">Workshop Instructions</li>
        
        
    
        <li class="chapter " data-level="21.1" data-path="../../workshop/lesson_2/">
            
                <a href="../../workshop/lesson_2/">
            
                    
                    Lesson 2 Workshop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="21.2" data-path="../../workshop/lesson_3/">
            
                <a href="../../workshop/lesson_3/">
            
                    
                    Lesson 3 Workshop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="21.3" data-path="../../workshop/lesson_4/">
            
                <a href="../../workshop/lesson_4/">
            
                    
                    Lesson 4 Workshop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="21.4" data-path="../../workshop/lesson_5/">
            
                <a href="../../workshop/lesson_5/">
            
                    
                    Lesson 5 Workshop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="21.5" data-path="../../workshop/lesson_6/">
            
                <a href="../../workshop/lesson_6/">
            
                    
                    Lesson 6 Workshop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="21.6" data-path="../../workshop/lesson_7/">
            
                <a href="../../workshop/lesson_7/">
            
                    
                    Lesson 7 Workshop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="21.7" data-path="../../workshop/lesson_8/">
            
                <a href="../../workshop/lesson_8/">
            
                    
                    Lesson 8 Workshop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="21.8" data-path="../../workshop/lesson_9/">
            
                <a href="../../workshop/lesson_9/">
            
                    
                    Lesson 9 Workshop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="21.9" data-path="../../workshop/lesson_10/">
            
                <a href="../../workshop/lesson_10/">
            
                    
                    Lesson 10 Workshop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="21.10" data-path="../../workshop/lesson_15/">
            
                <a href="../../workshop/lesson_15/">
            
                    
                    Lesson 15 Workshop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="21.11" data-path="../../workshop/lesson_16/">
            
                <a href="../../workshop/lesson_16/">
            
                    
                    Lesson 16 Workshop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="21.12" data-path="../../workshop/lesson_17/">
            
                <a href="../../workshop/lesson_17/">
            
                    
                    Lesson 17 Workshop
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Workshop Solutions</li>
        
        
    
        <li class="chapter " data-level="22.1" data-path="../../workshop/answer/lesson_2/">
            
                <a href="../../workshop/answer/lesson_2/">
            
                    
                    Lesson 2 Solution
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="22.2" data-path="../../workshop/answer/lesson_3/">
            
                <a href="../../workshop/answer/lesson_3/">
            
                    
                    Lesson 3 Solution
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="22.3" data-path="../../workshop/answer/lesson_4/">
            
                <a href="../../workshop/answer/lesson_4/">
            
                    
                    Lesson 4 Solution
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="22.4" data-path="../../workshop/answer/lesson_5/">
            
                <a href="../../workshop/answer/lesson_5/">
            
                    
                    Lesson 5 Solution
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="22.5" data-path="../../workshop/answer/lesson_6/">
            
                <a href="../../workshop/answer/lesson_6/">
            
                    
                    Lesson 6 Solution
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="22.6" data-path="../../workshop/answer/lesson_15/">
            
                <a href="../../workshop/answer/lesson_15/">
            
                    
                    Lesson 15 Solution
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="22.7" data-path="../../workshop/answer/lesson_16/">
            
                <a href="../../workshop/answer/lesson_16/">
            
                    
                    Lesson 16 Solution
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="22.8" data-path="../../workshop/answer/lesson_17/">
            
                <a href="../../workshop/answer/lesson_17/">
            
                    
                    Lesson 17 Solution
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Additional Resources</li>
        
        
    
        <li class="chapter " data-level="23.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Course README
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            Published with HonKit
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../.." >Workshop</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="lesson-17-deployment--production-infrastructure">Lesson 17: Deployment &amp; Production Infrastructure</h1>
<h2 id="what-we-want-to-build">What we want to build</h2>
<p>A complete production-ready deployment setup for your Temporal Workflow application using modern containerization and orchestration tools. This lesson teaches you how to deploy the entire Temporal stack (server, database, workers) and your Kotlin Spring Boot application using Docker, Docker Compose, and Kubernetes.</p>
<h2 id="expecting-result">Expecting Result</h2>
<p>By the end of this lesson, you will be able to:</p>
<ul>
<li>Containerize your Kotlin Spring Boot Temporal worker application</li>
<li>Deploy the complete Temporal stack locally using Docker Compose</li>
<li>Deploy to Kubernetes using plain manifests or Helm charts</li>
<li>Configure environment-specific settings and secrets management</li>
<li>Monitor and troubleshoot your deployed application</li>
<li>Scale your workers based on workload demands</li>
</ul>
<h2 id="code-steps">Code Steps</h2>
<h3 id="step-1-create-a-production-ready-dockerfile">Step 1: Create a Production-Ready Dockerfile</h3>
<p>Build a multi-stage Dockerfile for efficient container images:</p>
<pre><code class="lang-dockerfile"># Build stage
FROM gradle:7.6-jdk17 AS build
WORKDIR /app

# Copy Gradle files first for better layer caching
COPY build.gradle.kts settings.gradle.kts ./
COPY gradle gradle/

# Download dependencies
RUN gradle dependencies --no-daemon

# Copy source and build
COPY src src/
RUN gradle build -x test --no-daemon

# Runtime stage
FROM openjdk:17-jre-slim AS runtime
# Install curl for health checks
RUN apt-get update &amp;&amp; apt-get install -y curl &amp;&amp; rm -rf /var/lib/apt/lists/*

# Create non-root user for security
RUN groupadd -r temporal &amp;&amp; useradd -r -g temporal temporal
WORKDIR /app

# Copy JAR from build stage
COPY --from=build /app/build/libs/*.jar app.jar
RUN chown -R temporal:temporal /app
USER temporal

EXPOSE 8080
ENTRYPOINT exec java $JAVA_OPTS -jar app.jar
</code></pre>
<p><strong>Key considerations:</strong></p>
<ul>
<li>Multi-stage build reduces final image size</li>
<li>Non-root user improves security</li>
<li>Health check endpoint for container orchestration</li>
<li>Configurable JVM options for containerized environments</li>
</ul>
<h3 id="step-2-configure-docker-compose-for-local-development">Step 2: Configure Docker Compose for Local Development</h3>
<p>Create a complete <code>docker-compose.yaml</code> with all services:</p>
<pre><code class="lang-yaml">version: '3.8'

services:
  # PostgreSQL for Temporal persistence
  postgresql:
    image: postgres:13
    environment:
      POSTGRES_PASSWORD: temporal
      POSTGRES_USER: temporal
      POSTGRES_DB: temporal
    volumes:
      - postgres_data:/var/lib/postgresql/data
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U temporal"]
      interval: 10s
      timeout: 5s
      retries: 5

  # Temporal server with auto-setup
  temporal:
    image: temporalio/auto-setup:1.22.0
    ports:
      - "7233:7233"  # gRPC
      - "8080:8080"  # HTTP
    environment:
      - DB=postgresql
      - POSTGRES_USER=temporal
      - POSTGRES_PWD=temporal
      - POSTGRES_SEEDS=postgresql
    depends_on:
      postgresql:
        condition: service_healthy

  # Your worker application
  temporal-worker:
    build:
      context: .
      dockerfile: Dockerfile
    environment:
      - TEMPORAL_FRONTEND_ADDRESS=temporal:7233
      - SPRING_PROFILES_ACTIVE=docker
    depends_on:
      temporal:
        condition: service_healthy
</code></pre>
<p><strong>Key features:</strong></p>
<ul>
<li>Health checks ensure proper startup order</li>
<li>Environment-specific configuration</li>
<li>Volume persistence for database</li>
<li>Network isolation between services</li>
</ul>
<h3 id="step-3-environment-configuration">Step 3: Environment Configuration</h3>
<p>Create environment configuration files:</p>
<p><strong>env.example:</strong></p>
<pre><code class="lang-bash"># Temporal configuration
TEMPORAL_FRONTEND_ADDRESS=localhost:7233
TEMPORAL_NAMESPACE=default

# Database settings
POSTGRES_USER=temporal
POSTGRES_PASSWORD=temporal
POSTGRES_DB=temporal

# Application settings
SPRING_PROFILES_ACTIVE=docker
SERVER_PORT=8080
LOGGING_LEVEL_ROOT=INFO
</code></pre>
<p>Copy <code>env.example</code> to <code>.env</code> and customize for your environment.</p>
<h3 id="step-4-kubernetes-deployment-with-plain-manifests">Step 4: Kubernetes Deployment with Plain Manifests</h3>
<p>Create Kubernetes manifests for production deployment:</p>
<p><strong>Namespace:</strong></p>
<pre><code class="lang-yaml">apiVersion: v1
kind: Namespace
metadata:
  name: temporal-system
</code></pre>
<p><strong>ConfigMap for application configuration:</strong></p>
<pre><code class="lang-yaml">apiVersion: v1
kind: ConfigMap
metadata:
  name: temporal-worker-config
  namespace: temporal-system
data:
  application.yaml: |
    temporal:
      frontend.address: temporal-service:7233
      namespace: default
    spring:
      profiles.active: kubernetes
</code></pre>
<p><strong>Secret for sensitive data:</strong></p>
<pre><code class="lang-yaml">apiVersion: v1
kind: Secret
metadata:
  name: temporal-worker-secrets
  namespace: temporal-system
type: Opaque
stringData:
  database-username: temporal
  database-password: temporal
  external-api-key: your-api-key-here
</code></pre>
<p><strong>Deployment with proper resource limits and health checks:</strong></p>
<pre><code class="lang-yaml">apiVersion: apps/v1
kind: Deployment
metadata:
  name: temporal-worker
  namespace: temporal-system
spec:
  replicas: 3
  selector:
    matchLabels:
      app: temporal-worker
  template:
    spec:
      containers:
      - name: temporal-worker
        image: temporal-worker:latest
        ports:
        - containerPort: 8080
        env:
        - name: TEMPORAL_FRONTEND_ADDRESS
          value: "temporal-service:7233"
        resources:
          limits:
            memory: "1Gi"
            cpu: "1000m"
          requests:
            memory: "512Mi"
            cpu: "500m"
        livenessProbe:
          httpGet:
            path: /actuator/health
            port: 8080
          initialDelaySeconds: 60
        readinessProbe:
          httpGet:
            path: /actuator/health
            port: 8080
          initialDelaySeconds: 30
</code></pre>
<h3 id="step-5-helm-chart-for-advanced-deployment">Step 5: Helm Chart for Advanced Deployment</h3>
<p>Create a Helm chart for configurable deployments:</p>
<p><strong>Chart.yaml:</strong></p>
<pre><code class="lang-yaml">apiVersion: v2
name: temporal-worker
description: Temporal Worker Helm Chart
version: 0.1.0
appVersion: "1.0.0"
dependencies:
  - name: postgresql
    version: "11.9.13"
    repository: https://charts.bitnami.com/bitnami
    condition: postgresql.enabled
</code></pre>
<p><strong>values.yaml:</strong></p>
<pre><code class="lang-yaml">replicaCount: 3

image:
  repository: temporal-worker
  tag: latest
  pullPolicy: IfNotPresent

temporal:
  frontendAddress: "temporal-service:7233"
  namespace: "default"

resources:
  limits:
    cpu: 1000m
    memory: 1Gi
  requests:
    cpu: 500m
    memory: 512Mi

postgresql:
  enabled: true
  auth:
    username: temporal
    password: temporal
    database: temporal
</code></pre>
<h3 id="step-6-application-configuration-for-containers">Step 6: Application Configuration for Containers</h3>
<p>Update your Spring Boot application configuration to work with containers:</p>
<p><strong>application-docker.yaml:</strong></p>
<pre><code class="lang-yaml">server:
  port: 8080

temporal:
  frontend:
    address: ${TEMPORAL_FRONTEND_ADDRESS:localhost:7233}
  namespace: ${TEMPORAL_NAMESPACE:default}

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: always
</code></pre>
<p><strong>application-kubernetes.yaml:</strong></p>
<pre><code class="lang-yaml">server:
  port: 8080

temporal:
  frontend:
    address: ${TEMPORAL_FRONTEND_ADDRESS}
  namespace: ${TEMPORAL_NAMESPACE}

spring:
  datasource:
    username: ${DATABASE_USERNAME}
    password: ${DATABASE_PASSWORD}
</code></pre>
<h3 id="step-7-build-and-test-your-container">Step 7: Build and Test Your Container</h3>
<p>Build and test your container locally:</p>
<pre><code class="lang-bash"># Build the Docker image
docker build -t temporal-worker:latest .

# Test the container locally
docker run -p 8080:8080 --name temporal-worker-test \
  -e TEMPORAL_FRONTEND_ADDRESS=host.docker.internal:7233 \
  temporal-worker:latest

# Check health endpoint
curl http://localhost:8080/actuator/health
</code></pre>
<h3 id="step-8-deploy-with-docker-compose">Step 8: Deploy with Docker Compose</h3>
<p>Start the complete stack locally:</p>
<pre><code class="lang-bash"># Start all services
docker compose up -d

# Check service status
docker compose ps

# View logs
docker compose logs temporal-worker

# Access Temporal Web UI
open http://localhost:8088

# Access your application
curl http://localhost:8081/actuator/health
</code></pre>
<h3 id="step-9-deploy-to-kubernetes">Step 9: Deploy to Kubernetes</h3>
<p>Deploy using kubectl:</p>
<pre><code class="lang-bash"># Create namespace
kubectl apply -f k8s/namespace.yaml

# Apply configuration
kubectl apply -f k8s/configmap.yaml
kubectl apply -f k8s/secret.yaml

# Deploy application
kubectl apply -f k8s/deployment.yaml
kubectl apply -f k8s/service.yaml

# Check deployment status
kubectl get pods -n temporal-system
kubectl logs -f deployment/temporal-worker -n temporal-system

# Port forward to access application
kubectl port-forward svc/temporal-worker-service 8080:8080 -n temporal-system
</code></pre>
<p>Or deploy using Helm:</p>
<pre><code class="lang-bash"># Install dependencies
helm dependency update ./helm

# Install the chart
helm install temporal-worker ./helm \
  --namespace temporal-system \
  --create-namespace \
  --values ./helm/values.yaml

# Check deployment
helm status temporal-worker -n temporal-system
kubectl get pods -n temporal-system
</code></pre>
<h2 id="how-to-run">How to Run</h2>
<h3 id="local-development-with-docker-compose">Local Development with Docker Compose</h3>
<ol>
<li><p><strong>Copy environment file:</strong></p>
<pre><code class="lang-bash">cp env.example .env
# Edit .env with your configuration
</code></pre>
</li>
<li><p><strong>Start the stack:</strong></p>
<pre><code class="lang-bash">docker compose up -d
</code></pre>
</li>
<li><p><strong>Verify services are running:</strong></p>
<pre><code class="lang-bash">docker compose ps
# All services should show "Up" status
</code></pre>
</li>
<li><p><strong>Check application health:</strong></p>
<pre><code class="lang-bash">curl http://localhost:8081/actuator/health
</code></pre>
</li>
<li><p><strong>Access Temporal Web UI:</strong></p>
<pre><code class="lang-bash">open http://localhost:8088
</code></pre>
</li>
<li><p><strong>Monitor logs:</strong></p>
<pre><code class="lang-bash">docker compose logs -f temporal-worker
</code></pre>
</li>
</ol>
<h3 id="production-deployment-with-kubernetes">Production Deployment with Kubernetes</h3>
<ol>
<li><p><strong>Prepare cluster:</strong></p>
<pre><code class="lang-bash"># Create namespace
kubectl create namespace temporal-system
</code></pre>
</li>
<li><p><strong>Deploy using kubectl:</strong></p>
<pre><code class="lang-bash">kubectl apply -f k8s/ -n temporal-system
</code></pre>
</li>
<li><p><strong>Or deploy using Helm:</strong></p>
<pre><code class="lang-bash">helm install temporal-worker ./helm -n temporal-system --create-namespace
</code></pre>
</li>
<li><p><strong>Verify deployment:</strong></p>
<pre><code class="lang-bash">kubectl get pods -n temporal-system
kubectl get svc -n temporal-system
</code></pre>
</li>
<li><p><strong>Access application:</strong></p>
<pre><code class="lang-bash">kubectl port-forward svc/temporal-worker-service 8080:8080 -n temporal-system
curl http://localhost:8080/actuator/health
</code></pre>
</li>
</ol>
<h3 id="what-logs-to-watch">What Logs to Watch</h3>
<p><strong>Successful startup logs to look for:</strong></p>
<pre><code class="lang-log"># Temporal connection
INFO - Successfully connected to Temporal at temporal:7233

# Worker registration
INFO - Worker started for task queue: default-task-queue

# Spring Boot startup
INFO - Started TemporalStarterApplication in X.XXX seconds

# Health check
INFO - Health check endpoint available at /actuator/health
</code></pre>
<p><strong>Troubleshooting common issues:</strong></p>
<ul>
<li><strong>Connection refused:</strong> Check if Temporal server is running and accessible</li>
<li><strong>Database connection issues:</strong> Verify PostgreSQL is healthy and credentials are correct</li>
<li><strong>Image pull errors:</strong> Ensure Docker image is built and tagged correctly</li>
<li><strong>Health check failures:</strong> Check if application is binding to correct port (8080)</li>
</ul>
<h3 id="scaling-your-deployment">Scaling Your Deployment</h3>
<p><strong>Docker Compose scaling:</strong></p>
<pre><code class="lang-bash">docker compose up -d --scale temporal-worker=3
</code></pre>
<p><strong>Kubernetes manual scaling:</strong></p>
<pre><code class="lang-bash">kubectl scale deployment temporal-worker --replicas=5 -n temporal-system
</code></pre>
<p><strong>Kubernetes auto-scaling:</strong></p>
<pre><code class="lang-bash">kubectl autoscale deployment temporal-worker \
  --min=3 --max=10 --cpu-percent=80 \
  -n temporal-system
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="concept.html" class="navigation navigation-prev " aria-label="Previous page: Concept">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="diagram.html" class="navigation navigation-next " aria-label="Next page: Diagram">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Workshop","level":"19.2","depth":1,"next":{"title":"Diagram","level":"19.3","depth":1,"path":"class/modules/lesson_17/diagram.md","ref":"class/modules/lesson_17/diagram.md","articles":[]},"previous":{"title":"Concept","level":"19.1","depth":1,"path":"class/modules/lesson_17/concept.md","ref":"class/modules/lesson_17/concept.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-highlight"],"root":".","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"Temporal Workflow Bootcamp Team","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{"version":"1.0.0","course":"Temporal Workflow Bootcamp"},"title":"Temporal Workflow Bootcamp","language":"en","gitbook":">=3.0.0","description":"Master production-ready distributed systems with Temporal workflows"},"file":{"path":"class/modules/lesson_17/workshop_17.md","mtime":"2025-07-25T08:54:23.781Z","type":"markdown"},"gitbook":{"version":"6.0.3","time":"2025-07-25T08:54:36.969Z"},"basePath":"../../..","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../../../gitbook/gitbook.js"></script>
    <script src="../../../gitbook/theme.js"></script>
    
        
        <script src="../../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../../gitbook/@honkit/honkit-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

